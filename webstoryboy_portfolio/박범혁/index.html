<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://webfontworld.github.io/NexonLv2Gothic/NexonLv2Gothic.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,800;0,900;1,700&display=swap" rel="stylesheet">
    <link href="https://webfontworld.github.io/gmarket/GmarketSans.css" rel="stylesheet">

    <link href="https://webfontworld.github.io/NexonLv2Gothic/NexonLv2Gothic.css" rel="stylesheet">
</head>
<body>

    <header id="header">
        <h1>portfolio<em>frontend</em></h1>
        <nav>
            <ul>
                <li><a href="#">about</a></li>
                <li><a href="#">site</a></li>
                <li><a href="#">script</a></li>
                <li><a href="#">react</a></li>
                <li><a href="#">contact</a></li>
            </ul>
        </nav>
    </header>
    <!-- //header -->
    
    <div id="contents">
        <section id="section1">
            <div class="sec1">
                <div class="about__title">
                    <h2 class="splitText">Park's Port</h2>
                </div>
                <div class="about__desc">
                    <div class="line1"></div>
                    <div class="line2"></div>
                    <div class="line3"></div>
                    <div class="line4"></div>
                    <div class="line5"></div>
                    <div class="line6"></div>
                    <div class="line7"></div>
                    <div class="line8"><em>Simple deals for great companies</em></div>
                </div>
                <div class="about__intro">
                    <div class="text">
                        <div>We buy, invest in,</div>
                        <div>and partner with exceptional</div>
                        <div>companies</div>
                    </div>
                    <canvas id="webgl"></canvas>
                </div>
            </div>
        </section>
        <!-- //section1 -->

        <section id="section2">
            <div class="sec2">
                <div class="intro">
                    <div class="intro__title">What I do</div>
                    <div class="intro__desc">
                        <h3>1.</h3>
                        <p>
                            '배움에는 끝이 없다' 라는 말이 있듯이 공부도 100% 라는 완벽한 수치는 없다고 생각합니다. 그렇지만 100%에 
                            근접할 수 있도록 틈틈이 비는 시간을 이용해 배웠던것도 
                            복습하고 새로운 것들을 공부하여 차근차근 퍼블리셔 업무에 
                        대한 저만의 전문성과 경쟁력을 갖추겠습니다. 
                        </p>
                        <h3>2.</h3>
                        <p>
                            '배움에는 끝이 없다' 라는 말이 있듯이 공부도 100% 라는 완벽한 수치는 없다고 생각합니다. 그렇지만 100%에 
                            근접할 수 있도록 틈틈이 비는 시간을 이용해 배웠던것도 
                            복습하고 새로운 것들을 공부하여 차근차근 퍼블리셔 업무에 
                        대한 저만의 전문성과 경쟁력을 갖추겠습니다. 
                        </p>
                        <h3>3.</h3>
                        <p>
                            '배움에는 끝이 없다' 라는 말이 있듯이 공부도 100% 라는 완벽한 수치는 없다고 생각합니다. 그렇지만 100%에 
                            근접할 수 있도록 틈틈이 비는 시간을 이용해 배웠던것도 
                            복습하고 새로운 것들을 공부하여 차근차근 퍼블리셔 업무에 
                        대한 저만의 전문성과 경쟁력을 갖추겠습니다. 
                        </p>
                        
                    </div>
                </div>
            </div>
        </section>
        <!-- //section2 -->

        <section id="section3">
            <div class="sec3">
                <h3>Why work with us</h3>
                <div class="port-wrap">
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                    <div class="port"></div>
                </div>
            </div>
        </section>
        <!-- //section3 -->

        <section id="section4">
            <div class="sec4">
                <h3>section4</h3>
                <div class="java-wrap">
                    <div class="j1">1</div>
                    <div class="j2">2</div>
                    <div class="j3">3</div>
                    <div class="j4">4</div>
                    <div class="j5">5</div>
                </div>
                <div class="java-wrap2">
                    section4-2
                </div>
            </div>
        </section>
        <!-- //section4 -->

        <section id="section5">
            <div class="sec5">
                <h3>section5</h3>

            </div>
        </section><!-- //section5 -->
        <section id="section6"></section><!-- //section6 -->
    </div>

    <!-- https://odins-crow.com/ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/97/three.min.js"></script>
    <script src="https://cdn.rawgit.com/josephg/noisejs/master/perlin.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger);

        gsap.set(".port-wrap .port", { opacity: 0, y:300 })

        gsap.to(".port-wrap .port", {
            duration: 1,
            opacity: 1,
            y: 0,
            stagger: 0.3,
            scrollTrigger: {
                trigger: ".port-wrap .port",
                start: "top 50%",
                end: "bottom 10%",
                markers: false,
                toggleActions: "play none none none"
            }
        })

        // gsap.to(".java-wrap > div.j2", {
        //     duration: 1,
        //     scrollTrigger: {
        //         trigger
        //     }
        // })

        // let projects = gsap.utils.toArray(".java-wrap > div");

        // let tl = gsap.timeline({
        //     scrollTrigger: {
        //         trigger: ".java-wrap",
        //         start: () => "top top",
        //         end: () => "" + (projects.length - 1) * window.innerHeight,
        //         scrub: 0.8,
        //         pin: true,
        //         invalidateOnRefresh: true,
        //     },
        // });

        // projects.forEach((project, i) => {
        //     if (i !== projects.length - 1) {
        //         tl.to(project, {
        //             xPercent: -92 + (projects.length - 1),
        //             ease: "none",
        //             stagger: 0.5,
        //             scrub: 0.8,
        //         });
        //     }
        // });

        gsap.to(".java-wrap > div.j2", {
            duration: 3,
            x: 0,
            scrollTrigger: {
                trigger: ".java-wrap > div.j2",
                start: "top 100px",
                end: () => `+=${document.querySelector(".java-wrap").offsetHeight}`,
                markers: true,
                scrub: 1,
                xPercent: 0
            }
        })




        // document.querySelectorAll(".splitText").forEach(desc => {
        //     let splitText = desc.innerText;
        //     let splitWrap = splitText.split('').join("</span><span aria-hidden='true'>");
        //         splitWrap = "<span aria-hidden='true'>" + splitWrap + "</span>";
        //         desc.innerHTML = splitWrap;
        //         desc.setAttribute("aria-label", splitText);
        // })

        // gsap.to(".about__title h2 span" , {y:200})
        // gsap.set(".about__desc div" , {width: "0"})
        // gsap.set("#header" , {top: -150})
        // gsap.set(".about__intro" , {y: 100, opacity: 0})

        // setTimeout(() => {
        //     gsap.to(".line1" , {duration: 3, width: "100%", ease: "expo.out"})
        //     gsap.to(".line2" , {duration: 3, width: "100%", ease: "expo.out", delay: 1})
        //     gsap.to(".line3" , {duration: 3, width: "100%", ease: "expo.out", delay: 1.5})
        //     gsap.to(".line4" , {duration: 3, width: "100%", ease: "expo.out", delay: 2})
        //     gsap.to(".line5" , {duration: 3, width: "100%", ease: "expo.out", delay: 2.5})
        //     gsap.to(".line6" , {duration: 3, width: "100%", ease: "expo.out", delay: 3})
        //     gsap.to(".line7" , {duration: 3, width: "100%", ease: "expo.out", delay: 3.5})
        //     gsap.to(".line8" , {duration: 3, width: "100%", ease: "expo.out", delay: 4})
        //     gsap.to(".about__title h2 span" , {duration: 0.8, y:0, ease: "expo.out", stagger: 0.015, delay: 4})
        //     gsap.to(".about__desc .line8 em" , {duration: 0.8, y:0, ease: "expo.out", delay: 4.4})
        //     gsap.to("#header" , {duration: 0.8, top: 0, ease: "expo.out", delay: 4.7})
        //     gsap.to(".about__intro" , {duration: 0.8, y: 0, ease: "expo.out", opacity: 1, delay: 5.5})

            
        // }, 2000)
    </script>

    
    <script>
        const canvas = document.querySelector('#webgl');
        
        let width = canvas.offsetWidth,
            height = canvas.offsetHeight;

        const renderer = new THREE.WebGLRenderer({
            canvas: canvas,
            antialias: true,
            alpha: true
        });
        const scene = new THREE.Scene();

        const setup = () => {
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(width, height);
            renderer.setClearColor(0xebebeb, 0);
            renderer.shadowMap.enabled = true;
            renderer.shadowMapSoft = true;

            scene.fog = new THREE.Fog(0x000000, 10, 950);

            const aspectRatio = width / height;
            const fieldOfView = 75;
            const nearPlane = 0.1;
            const farPlane = 10000;
            camera = new THREE.PerspectiveCamera(
                fieldOfView,
                aspectRatio,
                nearPlane,
                farPlane
            );
            camera.position.x = 0;
            camera.position.y = 0;
            camera.position.z = 300;
        }
        setup();

        let hemispshereLight, shadowLight, light2;
        const createLights = () => {
            hemisphereLight = new THREE.HemisphereLight(0xffffff, 0x000000, .5)

            shadowLight = new THREE.DirectionalLight(0xff8f16, .4);
            shadowLight.position.set(0, 450, 350);
            shadowLight.castShadow = true;

            shadowLight.shadow.camera.left = -650;
            shadowLight.shadow.camera.right = 650;
            shadowLight.shadow.camera.top = 650;
            shadowLight.shadow.camera.bottom = -650;
            shadowLight.shadow.camera.near = 1;
            shadowLight.shadow.camera.far = 1000;

            shadowLight.shadow.mapSize.width = 4096;
            shadowLight.shadow.mapSize.height = 4096;

            light2 = new THREE.DirectionalLight(0xfff150, .25);
            light2.position.set(-600, 350, 350);

            light3 = new THREE.DirectionalLight(0xfff150, .15);
            light3.position.set(0, -250, 300);

            scene.add(hemisphereLight);
            scene.add(shadowLight);
            scene.add(light2);
            scene.add(light3);
        }
        createLights();

        const vertex = width > 575 ? 80 : 40;
        const bubbleGeometry = new THREE.SphereGeometry(120, vertex, vertex);
        let bubble;
        const createBubble = () => {
            for (let i = 0; i < bubbleGeometry.vertices.length; i++) {
                let vector = bubbleGeometry.vertices[i];
                vector.original = vector.clone();
            }
            const bubbleMaterial = new THREE.MeshStandardMaterial({
                emissive: 0xbd4be3,
                emissiveIntensity: 0.5,
                roughness: 0.61,
                metalness: 0.21,
                side: THREE.FrontSide,
                wireframe: true
            });
            bubble = new THREE.Mesh(bubbleGeometry, bubbleMaterial);
            bubble.castShadow = true;
            bubble.receiveShadow = false;
            scene.add(bubble);
        }
        createBubble();

        const createPlane = () => {
            const planeGeometry = new THREE.PlaneBufferGeometry(2000, 2000);
            const planeMaterial = new THREE.ShadowMaterial({
                opacity: 0.15
            });
            const plane = new THREE.Mesh(planeGeometry, planeMaterial);
            plane.position.y = -150;
            plane.position.x = 0;
            plane.position.z = 0;
            plane.rotation.x = Math.PI / 180 * -90;
            plane.receiveShadow = true;
            scene.add(plane);
        }
        createPlane();

        const map = (num, in_min, in_max, out_min, out_max) => {
            return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
        }

        const distance = (a, b) => {
            const dx = a.x - b.x;
            const dy = a.y - b.y;
            const d = Math.sqrt(dx * dx + dy * dy);
            return d;
        }

        let mouse = new THREE.Vector2(0, 0);
        const onMouseMove = (e) => {
            gsap.to(mouse, {
                duration: 0.8,
                x: e.clientX || e.pageX || e.touches[0].pageX || 0,
                y: e.clientY || e.pageY || e.touches[0].pageY || 0,
                ease: Power2.easeOut
            });
        };
        ['mousemove', 'touchmove'].forEach(event => {
            window.addEventListener(event, onMouseMove);
        });

        let spring = {
            scale: 1
        };
        const clicking = {
            down: () => {
                gsap.to(spring, {
                    duration: .7,
                    scale: .7,
                    ease: Power3.easeOut
                });
            },
            up: () => {
                gsap.to(spring, {
                    duration: .9,
                    scale: 1,
                    ease: Elastic.easeOut
                });
            }
        };
        ['mousedown', 'touchstart'].forEach(event => {
            window.addEventListener(event, clicking.down);
        });
        ['mouseup', 'touchend'].forEach(event => {
            window.addEventListener(event, clicking.up);
        });

        const onResize = () => {
            canvas.style.width = '';
            canvas.style.height = '';
            width = canvas.offsetWidth;
            height = canvas.offsetHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            maxDist = distance(mouse, {
                x: width / 2,
                y: height / 2
            });
            renderer.setSize(width, height);
        }
        let resizeTm;
        window.addEventListener('resize', function () {
            resizeTm = clearTimeout(resizeTm);
            resizeTm = setTimeout(onResize, 200);
        });

        let dist = new THREE.Vector2(0, 0);
        let maxDist = distance(mouse, {
            x: width / 2,
            y: height / 2
        });
        const updateVertices = (time) => {
            dist = distance(mouse, {
                x: width / 2,
                y: height / 2
            });
            dist /= maxDist;
            dist = map(dist, 1, 0, 0, 1);
            for (let i = 0; i < bubbleGeometry.vertices.length; i++) {
                let vector = bubbleGeometry.vertices[i];
                vector.copy(vector.original);
                let perlin = noise.simplex3(
                    (vector.x * 0.006) + (time * 0.0005),
                    (vector.y * 0.006) + (time * 0.0005),
                    (vector.z * 0.006)
                );
                let ratio = ((perlin * 0.3 * (dist + 0.1)) + 0.8);
                vector.multiplyScalar(ratio);
            }
            bubbleGeometry.verticesNeedUpdate = true;
        }

        const render = (a) => {
            requestAnimationFrame(render);
            bubble.rotation.y = -4 + map(mouse.x, 0, width, 0, 4);
            bubble.rotation.z = 4 + map(mouse.y, 0, height, 0, -4);
            bubble.scale.set(spring.scale, spring.scale, spring.scale);
            updateVertices(a);
            renderer.clear();
            renderer.render(scene, camera);
        }
        requestAnimationFrame(render);
        renderer.render(scene, camera);
    </script>
</body>
</html>