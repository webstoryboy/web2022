<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style.css">


    <link href="https://webfontworld.github.io/BMJua/BMJua.css" rel="stylesheet">
</head>
<body>

    <header id="header">
        <h1>포트폴리오</h1>
        <nav>메뉴</nav>
    </header>
    <!-- //header -->

    <main id="contents">
        <section id="section1">
            <div class="sec1">
                <div class="img">
                    <img src="https://mj0614k.github.io/codingclass/portfolio/assets/img/portfolio__01.png" alt="">
                </div>
                <div class="text-bg" aria-hidden="true">
                    <div class="bgt1 split">portfolioportfolioportfolioportfolio</div>
                    <div class="bgt2 split">portfolioportfolioportfolioportfolio</div>
                    <div class="bgt3 split">portfolioportfolioportfolioportfolio</div>
                    <div class="bgt4 split">portfolioportfolioportfolioportfolio</div>
                </div>
            </div>
            <!-- <svg id="canvas"></svg> -->
        </section>
        <!-- //section1 -->

        <section id="section2">
            <div class="sec2">
                <div class="title">사이트 제작</div>
                <div class="title-desc">
                    <div>웹표준을 준수하며 다양한방법으로 제작한 사이트들을 소개합니다.</div>
                    <div>아래에서 실제사이트와 코드를 확인해보세요.</div>
                </div>
                <div class="title-ain">
                    <svg id="monsters" viewBox="350 0 600 500">
                        <ellipse class="st0" cx="667.3" cy="408.9" rx="160.3" ry="11.8"></ellipse>
                        <g class="monster">
                          <path id="first-monster-hand" class="st16" d="M757.4,289.3c0,0,58.9,0.8,47.8-64.2c-7.8-45.5,30.1-39.2,30.1-39.2s39.4,8.2,17.3,67
                          c-18.2,48.1-63.8,55-75.6,55L757.4,289.3z"></path>
                          <path class="st17" d="M646.2,63.3c0,0-33.3-19.4-96.2-15.5s32.2,50.4,32.2,50.4s-52.1-13.5-51.5,6.1c0.5,19.6,42,27.8,42,27.8
                          s-44.5-9.9-41.7,12.9s28.6,21.2,28.6,21.2s-39-2.1-32.4,19.4c6.6,21.5,59.2,32.4,59.2,32.4L646.2,63.3z"></path>
                          <path class="st16" d="M598.4,363.3c0,0-43.2,28.8-14.6,38.6c28.5,9.9,49.8-27.8,43.2-47.8C620.3,334.1,598.4,363.3,598.4,363.3z"></path>
                          <path class="st16" d="M655.3,327.2c0,0-20.5,74.3,7.6,77.8c47.8,5.8,22.2-38.2,16-58.2C672.7,326.7,655.3,327.2,655.3,327.2z"></path>
                          <path class="st16" d="M720.5,327.2c0,0-15.5,77.3,25.3,74.7c22.2-1.4,28.3-25.9,5.8-31.7C732.6,365.4,720.5,327.2,720.5,327.2z"></path>
                          <path class="st18" d="M537.8,358.9C526.4,253.3,535.6,170,639.2,37.6c0,0,217.3,35,142.4,321.4H537.8z"></path>
                          <path class="st16" d="M573.5,279c0,0-30.9-16.4-60.7,40.6c-26.4,50.6,47.8,62.1,50.2,26.5C566.8,291.2,591.3,288.9,573.5,279z"></path>
                          <g>
                            <circle class="st19" cx="701.1" cy="206.9" r="69.9"></circle>
                            <circle class="st4" cx="699" cy="199.9" r="65.6"></circle>
                            <circle id="first-monster-eye" class="st20" cx="717.5" cy="176.9" r="30.5"></circle>
                            <circle id="first-monster-eye-in" class="st4" cx="716.9" cy="154.9" r="13.3"></circle>
                          </g>
                          <path id="first-monster-mouth" class="st21" d="M631.2,338l110.4,0.7c0,0,1.1-51-73.4-43.6C624.4,299.4,631.2,338,631.2,338z"></path>
                          <path class="st19" d="M625.4,156.7c0,0,25-43.2,73.8-41.9C699.3,114.8,646.4,101.9,625.4,156.7z"></path>
                          <path class="st9" d="M662.8,295.8c0,0-9.5,24.2,1.9,25c11.4,0.9,16.5-0.2,18-4.6c1.4-4.4-3-21.8-3-21.8S670.5,293.9,662.8,295.8z"></path>
                          <path class="st9" d="M707.4,297.5c0,0,8.8,22.2-2.6,23.1c-11.4,0.9-16.5-0.2-18-4.6c-1.4-4.4,2.8-21.2,2.8-21.2
                          S699,295.1,707.4,297.5z"></path>
                        </g>
                    </svg>
                </div>
                <div class="site-wrap">
                    <div class="site s1">1</div>
                    <div class="site s2">2</div>
                    <div class="site s3">3</div>
                    <div class="site s4">4</div>
                </div>
            </div>
        </section>
        <!-- //section2 -->

        <section id="section3"></section><!-- //section3 -->
        <section id="section4"></section><!-- //section4 -->
        <section id="section5"></section><!-- //section5 -->
        <section id="section6"></section><!-- //section6 -->
    </main>



    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@latest/bundled/lenis.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
    <script>
        document.querySelectorAll(".split").forEach(desc => {
            let splitText = desc.innerText;
            let splitWrap = splitText.split('').join("</span><span aria-hidden='true'>");
                splitWrap = "<span aria-hidden='true'>" + splitWrap + "</span>";
                desc.innerHTML = splitWrap;
                desc.setAttribute("aria-label", splitText);
        })

        gsap.registerPlugin(ScrollTrigger);

        const lenis = new Lenis({
            duration: 1.2,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        })

        function raf(time) {
            lenis.raf(time)
            requestAnimationFrame(raf)
        }

        requestAnimationFrame(raf)

        setTimeout(() => {
            let mainTl = gsap.timeline();
            
            mainTl.to(".bgt1", {duration: 0.6, opacity: 1, x: 0, ease: Power3.easeOut}, "a")
            mainTl.to(".bgt2", {duration: 0.6, opacity: 1, x: 0, ease: Power3.easeOut}, "a")
            mainTl.to(".bgt3", {duration: 0.6, opacity: 1, x: 0, ease: Power3.easeOut}, "a")
            mainTl.to(".bgt4", {duration: 0.6, opacity: 1, x: 0, ease: Power3.easeOut}, "a")
            mainTl.to(".text-bg div span:nth-child(1)",  {duration: 0.6, color: "#f7e8d6"}, "b")
            mainTl.to(".text-bg div span:nth-child(10)", {duration: 0.6, color: "#f7e8d6"}, "b")
            mainTl.to(".text-bg div span:nth-child(19)", {duration: 0.6, color: "#f7e8d6"}, "b")
            mainTl.to(".text-bg div span:nth-child(28)", {duration: 0.6, color: "#f7e8d6"}, "b")
            mainTl.to(".text-bg div span:nth-child(1)",  {duration: 0.6, color: "#107531"}, "c")
            mainTl.to(".text-bg div span:nth-child(10)", {duration: 0.6, color: "#107531"}, "c")
            mainTl.to(".text-bg div span:nth-child(19)", {duration: 0.6, color: "#107531"}, "c")
            mainTl.to(".text-bg div span:nth-child(28)", {duration: 0.6, color: "#107531"}, "c")

            mainTl.to(".text-bg div span:nth-child(2)",  {duration: 0.6, color: "#f7e8d6"}, "d")
            mainTl.to(".text-bg div span:nth-child(11)", {duration: 0.6, color: "#f7e8d6"}, "d")
            mainTl.to(".text-bg div span:nth-child(20)", {duration: 0.6, color: "#f7e8d6"}, "d")
            mainTl.to(".text-bg div span:nth-child(29)", {duration: 0.6, color: "#f7e8d6"}, "d")
            mainTl.to(".text-bg div span:nth-child(2)",  {duration: 0.6, color: "#107531"}, "e")
            mainTl.to(".text-bg div span:nth-child(11)", {duration: 0.6, color: "#107531"}, "e")
            mainTl.to(".text-bg div span:nth-child(20)", {duration: 0.6, color: "#107531"}, "e")
            mainTl.to(".text-bg div span:nth-child(29)", {duration: 0.6, color: "#107531"}, "e")

            mainTl.to(".text-bg div span:nth-child(3)",  {duration: 0.6, color: "#f7e8d6"}, "f")
            mainTl.to(".text-bg div span:nth-child(12)", {duration: 0.6, color: "#f7e8d6"}, "f")
            mainTl.to(".text-bg div span:nth-child(21)", {duration: 0.6, color: "#f7e8d6"}, "f")
            mainTl.to(".text-bg div span:nth-child(30)", {duration: 0.6, color: "#f7e8d6"}, "f")
            mainTl.to(".text-bg div span:nth-child(3)",  {duration: 0.6, color: "#107531"}, "g")
            mainTl.to(".text-bg div span:nth-child(12)", {duration: 0.6, color: "#107531"}, "g")
            mainTl.to(".text-bg div span:nth-child(21)", {duration: 0.6, color: "#107531"}, "g")
            mainTl.to(".text-bg div span:nth-child(30)", {duration: 0.6, color: "#107531"}, "g")

            mainTl.to("#canvas", {duration: 2, opacity: 1, ease: Power3.easeOut})
            mainTl.to(".sec1 .img", {duration: 1, opacity: 1, scale:1, ease: Power3.easeOut}, "-=2")
            mainTl.to("#header", {duration: 1, top:0, ease: Power3.easeOut})
        }, 2000);

        gsap.to(".bgt1, .bgt3", {
            xPercent: -60,
            ease: "none",
            scrollTrigger: {
                scrub: 1,
            }
        })
        gsap.to(".bgt2, .bgt4", {
            xPercent: 60,
            ease: "none",
            scrollTrigger: {
                scrub: 1,
            }
        })

        gsap.to(".sec2 .title", {
            scale: 0.4, 
            paddingTop: "0vh",
            duration: 0.4,
            scrollTrigger: {
                trigger: "#section2",
                start: "top 5%",
                end: "top -25%",
                markers: true,
                scrub: 1,
            }
        })

        gsap.to(".sec2 .title-desc", {
            scale: 0, 
            duration: 0.4,
            scrollTrigger: {
                trigger: "#section2",
                start: "top 5%",
                end: "top -25%",
                markers: true,
                scrub: 1,
            }
        })

        gsap.to(".sec2 .title-ain", {
            duration: 0.4,
            left: "110vw",
            scrollTrigger: {
                trigger: "#section2",
                start: "top 5%",
                end: "bottom 5%",
                markers: true,
                scrub: 1,
            }
        })


    </script>
    <script type="module">
        import { SVG } from "https://cdn.skypack.dev/@svgdotjs/svg.js@3.1.1";
        import SimplexNoise from "https://cdn.skypack.dev/simplex-noise@3.0.1";
        import {
            random,
            randomSnap,
            map,
            createVoronoiTessellation,
            seedPRNG,
            spline
        } from "https://cdn.skypack.dev/@georgedoescode/generative-utils@1.0.37";

        const simplex = new SimplexNoise();

        const width = 1080;
        const height = 1080;

        let numShapes = 24;

        const state = {
            rate: 0.0002
        };

        const svg = SVG("#canvas")
            .viewbox(0, 0, width, height)
            .addTo("body")
            .attr("preserveAspectRatio", "xMidYMid slice")
            .attr("id", "canvas");

        const { cells } = createVoronoiTessellation({
            width,
            height,
            points: [...Array(12)].map(() => {
                return {
                    x: random(0, width),
                    y: random(0, height)
                };
            }),
            relaxIterations: 0
        });

        const blobWrapper = svg.group();

        gsap.set(blobWrapper.node, {
            scale: 1.25
        });

        // cells.forEach((cell) => {
        //     blob({ x: cell.centroid.x, y: cell.centroid.y }, cell.innerCircleRadius).fill(
        //         "hsla(0, 0%, 0%, 0.25)"
        //     );
        // });

        for (let i = 0; i < 256; i++) {
        svg
            .circle(random(1, 4))
            .cx(random(0, width))
            .cy(random(0, height))
            .fill("#fff")
            .opacity(0.5);
        }

        let noiseInc = state.rate;

        class Point {
            constructor(x, y, canvasWidth, canvasHeight) {
                this.x = x;
                this.y = y;

                this.canvasWidth = canvasWidth;
                this.canvasHeight = canvasHeight;

                this.xOff = random(0, 10000);
                this.yOff = random(0, 10000);

                this.noiseIncrement = noiseInc;
            }

            update() {
                const x = Math.floor(
                    map(simplex.noise2D(this.xOff, this.xOff), -1, 1, 0, this.canvasWidth)
                );
                const y = Math.floor(
                map(simplex.noise2D(this.yOff, this.yOff), -1, 1, 0, this.canvasHeight)
                );

                gsap.set(this, { x, y });

                this.xOff += this.noiseIncrement;
                this.yOff += this.noiseIncrement;
            }
        }

        class Layout {
            constructor() {
                this.maxSize = numShapes;

                this.points = [...Array(this.maxSize)].map(() => {
                    return new Point(random(0, width), random(0, height), width, height);
                });

                this.cells = [];

                this.duration = 0.8;

                const { cells } = createVoronoiTessellation({
                    width,
                    height,
                    points: this.points,
                    relaxIterations: 0
                });

                for (let i = 0; i < cells.length; i++) {
                    this.cells.push({
                        x: cells[i].centroid.x,
                        y: cells[i].centroid.y,
                        rad: cells[i].innerCircleRadius
                    });
                }
            }

            update() {
                let { cells } = createVoronoiTessellation({
                    width,
                    height,
                    points: this.points,
                    relaxIterations: 0
                });

                if (cells.length === this.maxSize) {
                    for (let i = 0; i < this.maxSize; i++) {
                        gsap.to(this.cells[i], {
                        x: cells[i].centroid.x,
                        y: cells[i].centroid.y,
                        duration: this.duration
                    });

                    gsap.to(this.cells[i], {
                        rad: cells[i].innerCircleRadius,
                        duration: this.duration * 2
                        });
                    }
                }

                for (let index = 0; index < this.points.length; index++) {
                const point = this.points[index];

                point.update();

                for (let i = 0; i < this.points.length; i++) {
                    if (
                    i !== index &&
                        this.points[i].x === point.x &&
                        this.points[i].y === point.y
                    ) {
                    point.xOff += 0.025;
                    point.yOff += 0.025;

                    point.update();
                    }
                }
                }
            }
        }

        class Character {
            constructor() {
                this.x = 0;
                this.y = 0;
                this.rad = 0;

                this.width = 1024;
                this.height = 1024;

                this.rotationXOff = random(0, 10000);
                this.rotationYOff = random(0, 10000);
                this.rotationInc = 0.000375;

                this.group = svg.group();
                this.group.rect(this.width, this.height).fill("none");

                this.wrapper = this.group.group();

                const bodyColors = ["#7438FF", "#FFD057", "#FF6842"];

                const bodyColor = random(bodyColors);

                if (random(0, 1) > 0.5) {
                this.body = this.wrapper.ellipse(this.width, this.height).fill(bodyColor);
                } else {
                this.body = this.wrapper
                    .rect(this.width, this.height)
                    .fill(bodyColor)
                    .rx(128);
                }

                if (random(0, 1) > 0.5) {
                const l = this.wrapper
                    .rect(this.width / 12, this.height / 8)
                    .cx(this.width / 2 + this.width / 6)
                    .y(this.height * 0.95)
                    .fill(bodyColor)
                    .rx(24);

                const r = this.wrapper
                    .rect(this.width / 12, this.height / 8)
                    .cx(this.width / 2 - this.width / 6)
                    .y(this.height * 0.95)
                    .fill(bodyColor)
                    .rx(24);
                } else {
                this.wrapper
                    .rect(this.width / 6, this.height / 8)
                    .cx(this.width / 2)
                    .y(this.height * 0.95)
                    .fill(bodyColor)
                    .rx(24);
                }

                gsap.set(this.wrapper.node, { scale: 0, transformOrigin: "50% 50%" });

                gsap.to(this.wrapper.node, {
                scale: 1,
                delay: random(0.5, 1),
                transformOrigin: "50% 50%",
                duration: 1
                });

                this.texture = this.wrapper.group();
                this.texture.clipWith(this.body.clone());

                for (let i = 0; i < 1; i++) {
                this.texture
                    .circle(random(this.width / 2, this.width * 0.75))
                    .cx(random(0, this.width))
                    .cy(random(0, this.height))
                    .fill("hsla(0, 0%, 100%, 0.25)");
                }

                this.wrapper
                .circle(this.width / 4)
                .cx(this.width / 2 - this.width / 10)
                .cy(this.height / 3)
                .fill("#fff");

                this.wrapper
                .circle(this.width / 4)
                .cx(this.width / 2 + this.width / 10)
                .cy(this.height / 3)
                .fill("#fff");

                const eyeBallGroup = this.wrapper.group();

                const eyeLeft = eyeBallGroup
                .circle(this.width / 10)
                .cx(this.width / 2 + this.width / 10)
                .cy(this.height / 3)
                .fill("#000")
                .attr("class", "eyeball");

                const eyeRight = eyeBallGroup
                .circle(this.width / 10)
                .cx(this.width / 2 - this.width / 10)
                .cy(this.height / 3)
                .fill("#000")
                .attr("class", "eyeball");

                this.eyeBalls = [eyeLeft.node, eyeRight.node];

                gsap.to(eyeBallGroup.node, {
                x: `random(-${this.width / 24}, ${this.width / 24}, ${this.width / 24})`,
                y: `random(-${this.width / 24}, ${this.width / 24}, ${this.width / 24})`,
                repeat: -1,
                repeatRefresh: true,
                duration: 4,
                delay: random(0, 2)
                // repeatDelay: 1
                });
            }

            update(x, y, rad) {
                this.x = x;
                this.y = y;
                this.rad = rad;

                this.rotationXOff += this.rotationInc;
                this.rotationYOff += this.rotationInc;
            }

            render() {
                const noise = simplex.noise2D(this.rotationXOff, this.rotationYOff);
                const rotation = map(noise, -1, 1, 0, 360);
                const rotationEye = map(noise, -1, 1, 0, 360);

                gsap.set(this.group.node, {
                x: this.x - this.rad / 2,
                y: this.y - this.rad / 2,
                scale: this.rad / this.width
                });

                gsap.set(this.wrapper.node, {
                rotate: rotation,
                transformOrigin: "50% 50%"
                });
            }
        }

        const layout = new Layout();
        const shapes = [];

        for (let i = 0; i < numShapes; i++) {
            const character = new Character();
            shapes.push(character);
        }

        function addShape() {
            const thing = svg.circle();
            shapes.push(thing);
        }

        function update() {
            for (let i = 0; i < shapes.length; i++) {
                const cell = layout.cells[i];
                const point = layout.points[i];
                const rotation = map(
                simplex.noise2D(point.xOff, point.yOff),
                -1,
                1,
                0,
                360
            );
            shapes[i].update(cell.x, cell.y, cell.rad);
            shapes[i].render();
        }

        layout.update();
        }

        function pushShapeToCanvas(x, y) {
            numShapes++;

            layout.maxSize++;
            layout.points.push(new Point(x, y, width, height));
            layout.cells.push({
                x,
                y,
                rad: 0
            });
            addShape();
            wiggle();
        }

        function wiggle() {
            layout.points.forEach((p) => {
                p.noiseIncrement = 0.01;
                setTimeout(() => {
                    p.noiseIncrement = 0.0002;
                }, 100);
            });
        }

        document.addEventListener("click", wiggle);

        let xOffGlobal = random(0, 10000);
        let yOffGlobal = random(0, 10000);

        window.tl = gsap.timeline({
            repeat: -1,
            onUpdate() {
                update();
            }
        });

        function blob(center, maxRadius) {
            const simplex = new SimplexNoise(Math.random() * 100000000);

            const numPoints = 1024;
            const points = [];

            const angleStep = (Math.PI * 2) / numPoints;

            const detail = (Math.PI * 2) / numPoints;
            const maxVariance = random(maxRadius / 4, maxRadius / 2);

            const offsetMult = random(0.5, 1);

            for (let i = 0; i < Math.PI * 2 - detail; i += detail) {
                const xoff = map(Math.cos(i), -1, 1, 0, offsetMult);
                const yoff = map(Math.sin(i), -1, 1, 0, offsetMult);

                const radius = map(
                simplex.noise2D(xoff, yoff),
                -1,
                1,
                maxVariance,
                maxRadius
                );

                const x = center.x + radius * Math.cos(i);
                const y = center.y + radius * Math.sin(i);

                points.push({ x, y });
            }

            return blobWrapper.path(spline(points, 1, true)).fill("#000");
        }
    </script>
</body>
</html>